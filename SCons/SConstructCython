import distutils.sysconfig
import os
import sys

PYTHON_LIBPATH = distutils.sysconfig.get_python_lib()
PYTHON_INCPATH = distutils.sysconfig.get_python_inc()
PYTHON_LIBRARY = "python" + sys.version[:3]

CythonBuilder = Builder(action ='cython $SOURCE',
                        suffix = '.c',
                        src_suffix = '.pyx')

def PydBuilder(env,source):
    cCode = env.Py2C(source)
    env.SharedLibrary(target='karl.pyd', source=cCode, LIBPREFIX='')

env = Environment(ENV      =   os.environ,
                  BUILDERS = {'Py2C':CythonBuilder})

env.AddMethod(CythonBuilder,'Cython')

env.Cython('c1')